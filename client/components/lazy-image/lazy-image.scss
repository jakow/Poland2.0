// The maps to define ratios
// use the map as (numerator: denominator[])

$predef-ratios: (
  1 : (1,),
  3 : (2,),
  5 : (4,),
  16 : (9,),
);

$transition: 0.3s ease-in;
$blur: 5px;

.lazy-img {
  background: $dark-color;
  position: relative;
  overflow: hidden;
  .preview, .original {
    position: absolute;
    // left: 0 - 2*$blur;
    // top: 0 - 2*$blur;
    // width: calc(100% + #{4*$blur});
    // If we can accept the edges bluring with the background color then
    // the image can have the correct
    left: 0;
    top: 0;
    width: 100%;
    will-change: opacity; // prepare the browser for opacity anim
    opacity: 0;
    visibility: hidden;
    &.loaded {
      transition: opacity $transition;
      opacity: 1;
      visibility: visible;
    }
  }
   //- Preview image is the blurry placeholder that first appears on the page
  .preview {
    z-index: 2;
    filter: blur(6px);
  }

  .original {
    z-index: 3;
    &.loaded {
      opacity: 1;
    }
  }
}

@each $numerator, $denominators in $predef-ratios {
  @each $denominator in $denominators {
    .lazy-img .ratio-#{$numerator}-to-#{$denominator} {
      padding-bottom: percentage($denominator/$numerator);
    }
  }
}

