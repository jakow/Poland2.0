$timeline-thickness: 4px;
// $timeline-offset: 1rem;
$timeline-offset: 0rem;
$timeline-offset-tablet: 1rem;
$agenda-event-top-padding: $vertical-baseline;
$agenda-event-left-padding: 1.25rem;
$agenda-event-right-padding: 1.25rem;
$map-height: 14*$vertical-baseline;
$ornament-width: 18px;
$ornament-height: $ornament-width/2/0.866;
$border-style: 1px solid rgba(1, 1, 1, 0.12);
$height-transition-duration: 350ms;

#agenda {
  padding: $vertical-baseline 0;
  background-color: $color-gray-light;
}
.agenda {
  position: relative;
  margin-bottom: $vertical-baseline;
}
.agenda__heading {
  z-index: 2;
  text-align: center;
  @include breakpoint($tablet) {
    // margin-bottom: -4*$vertical-baseline;
  }
}
.agenda__timeline {

  position: absolute;
  top: $ornament-width/2;
  bottom: $ornament-width/2;
  left: calc(#{$timeline-offset} - #{$timeline-thickness/2});
  @include breakpoint($tablet) {
    left: calc(#{$timeline-offset-tablet} - #{$timeline-thickness/2});
  }
  width: $timeline-thickness;
  background-color: $color-primary;
  z-index: 2;
  // the arrow on the bottom of the timeline
  &::after {
    content: '';
    position: absolute;
    bottom: -$ornament-width/2;
    width: 0;
    height: 0;
    // a triangle
    left: -$ornament-width/2 + 1px;
    border-left: $ornament-height solid transparent;
    border-right: $ornament-height solid transparent;
    border-top: $ornament-width solid $color-primary;
  }

}

.agenda-days {
  list-style: none;
  margin: 0;
  padding: 0 0 $vertical-baseline;
}

.agenda-day {
  margin-bottom: $vertical-baseline;
  h3 {
    margin-top: 0;
  }

}

.agenda-day__description {
  position: relative;
  margin: 0 0 $vertical-baseline $timeline-offset;
  
  padding: 0 $agenda-event-right-padding 0 $agenda-event-right-padding;
  @include breakpoint($tablet) {
    margin-left: $timeline-offset-tablet;
  }
  // the circular ornament on the timeline
  &::before {
    content: '';
    position: absolute;
    width: $ornament-width;
    height: $ornament-width;
    background-color: $color-primary;
    border-radius: 50%;
    margin-left: $timeline-offset;
    top: calc(#{0.5*$vertical-baseline} - #{0.5*$ornament-width});
    // top: 0;
    // left: $ornament-width/2 - $timeline-thickness/2;
    left: -$ornament-width/2;
    // left: 0;
  }
}

.agenda-day__events {
  list-style: none;
  padding: 0;
  // padding: 0 0 $vertical-baseline;
  // margin-top: $vertical-baseline;
  margin-bottom: $vertical-baseline;
}
.agenda-event {
  // margin: 0 $vertical-baseline $vertical-baseline;
  position: relative;
  margin-bottom: $vertical-baseline;
  background-color: white;
  // padding: $agenda-event-top-padding $agenda-event-right-padding 0 $agenda-event-left-padding;

  border: $border-style;
  box-shadow: $feather-shadow;
  transition: box-shadow 200ms ease-in-out;
  &:hover {
    box-shadow: 0 1px 12px 1px rgba(0, 0, 0, 0.18);
  }

  header {
    margin: $vertical-baseline 0;
  }

  // fit the padding 
  > header, > div {
    // margin-bottom: $vertical-baseline;
    padding-right: $agenda-event-right-padding;
    padding-left: $timeline-offset + $agenda-event-left-padding;
    @include breakpoint($tablet) {
      padding-left: $timeline-offset-tablet + $agenda-event-left-padding;

    }
  }

  &::before {
    content: '';
    position: absolute;
    left: $timeline-offset;
    @include breakpoint($tablet) {
      left: $timeline-offset-tablet;
    }
    top: calc(#{1.5*$vertical-baseline} - #{$timeline-thickness/2});
    height: $timeline-thickness;
    background: $color-primary;
    width: 12px;
  }
}

.agenda-event__name {
  @include sgl-heading(1);
  margin-top: 0;
  margin-bottom: $vertical-baseline;
  font-weight: 600;
}
.agenda-event__time-and-type {
  display: flex;
  color: $color-gray-medium;
}
.agenda-event__time {
  font-weight: 600;
}

.agenda-event__type {
  margin-left: 12px;
  font-weight: 400;
}

.agenda-event__summary {
  z-index: 1;
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  @include breakpoint($mobile-landscape) {
    flex-direction: row;
  }
}


a.agenda-event__permalink {
  z-index: 1;
  position: absolute;
  top: $agenda-event-top-padding;
  right: $agenda-event-right-padding;
  overflow: hidden;
  color: $color-gray-medium;
  > * {
    display: inline-block;
  }
  .agenda-event__permalink-icon {
    background: white;
    z-index: 1;
    // promote to transform layer to achieve clipping
    transform: translateX(0);
    @include sgl-heading(1);
    margin: 0;
    margin-left: 6px;
    vertical-align: middle;
  }

  .agenda-event__permalink-caption {
    // font-weight: 400;
    transition: transform 150ms ease-in-out;
    transform: translateX(calc(100% + 24px));
    z-index: 0;
  }

  &:hover {
    // never visible on mobile
    @include breakpoint($tablet) {
      .agenda-event__permalink-caption {
        transform: translateX(0);
      }
    }
  }


}


.agenda-event__speaker-list {
  display: flex;
  flex-direction: row;
  flex-wrap: wrap;
  list-style: none;
  margin: 0;
  padding: 0;
  flex: 1 0;
  align-items: flex-start;

  li {
    //
    display: flex;
    align-items: center;
    margin-bottom: $vertical-baseline;
    // Two ava
    flex: 1 0 100%;
    @include breakpoint($tablet) {
      flex-basis: 50%;
      padding-right: 12px;
    }
    @include breakpoint($desktop) {
      flex-basis: 1/3*100%;
    }
  }

  // only thumbnails which overlap on mobile
  &.agenda-event__speaker-list--avatars-only {
    li:not(:first-child) {
      margin-left: -24px;
      @include breakpoint($mobile-landscape) {
        margin-left: 0;
      }
    }
  }
}

$avatar-size: 3*$vertical-baseline;
// $avatar-margin: 0.5*$vertical-baseline 0;
$avatar-margin: 0;
.agenda-event__speaker-avatar {
  flex: none;
  display: inline-block;
  margin: $avatar-margin;
  width: $avatar-size;
  height: $avatar-size;
  vertical-align: middle;
  border: 3px solid white;
  border-radius: 50%;
  z-index: 1;
  .lazy-img {
    background-color: white;
    border-radius: 50%;
  }
}

.agenda-event__speaker-name {
  display: inline-block;
  // margin-left: 10px;
  @include sgl-heading(1);
  margin: 0 0 0 12px;
  // margin-bottom: $vertical-baseline;

}

$location-pin-size: 0.75* $vertical-baseline;
$location-pin-size-tablet: 1.5*$vertical-baseline;
.agenda-event__venue {
  @include breakpoint($mobile-landscape) {
    flex: 0 1 33%;
  }
  &:empty {
    display: none;
  }

  margin-bottom: $vertical-baseline;
  
  // map marker icon on the left 
	background-image: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMiIgaGVpZ2h0PSIzMiIgdmlld0JveD0iMCwgMCwgMzIsIDMyIj48ZyBmaWxsLW9wYWNpdHk9Ii4zOCI+PHBhdGggZD0iTTE1Ljk5OSAzMGEuNy43IDAgMCAxLS41NTEtLjI2N2MtLjA3OS0uMTAzLTEuOTg1LTIuNTQtMy45MTUtNi4xMzktMS4xMzctMi4xMTktMi4wNDQtNC4xOTktMi42OTUtNi4xODNDOC4wMTYgMTQuOTA5IDcuNiAxMi41NSA3LjYgMTAuNCA3LjYgNS43NjkgMTEuMzY5IDIgMTYgMnM4LjQgMy43NjkgOC40IDguNGMwIDIuMTUtLjQxNyA0LjUwOC0xLjIzOCA3LjAxMS0uNjUxIDEuOTg0LTEuNTU4IDQuMDY0LTIuNjk1IDYuMTgzLTEuOTMyIDMuNTk5LTMuODM2IDYuMDM2LTMuOTE1IDYuMTM5YS43LjcgMCAwIDEtLjU1MS4yNjd6bTAtMjYuNmMtMy44NiAwLTcgMy4xNC03IDcgMCA0LjU1NiAyLjA0OCA5LjMzIDMuNzY3IDEyLjUzMWE0OC4wOTMgNDguMDkzIDAgMCAwIDMuMjMzIDUuMTk0IDQ4LjE5OCA0OC4xOTggMCAwIDAgMy4yNDUtNS4yMTZjMS43MTItMy4xOTYgMy43NTUtNy45NjIgMy43NTUtMTIuNTA5IDAtMy44Ni0zLjE0MS03LTctN3oiLz48cGF0aCBkPSJNMTYgMTYuMDQ3YTQuMjA1IDQuMjA1IDAgMCAxLTQuMi00LjJjMC0yLjMxNiAxLjg4NC00LjIgNC4yLTQuMiAyLjMxNiAwIDQuMiAxLjg4NCA0LjIgNC4yIDAgMi4zMTUtMS44ODQgNC4yLTQuMiA0LjJ6bTAtN2EyLjgwMyAyLjgwMyAwIDAgMC0yLjggMi44YzAgMS41NDQgMS4yNTYgMi44IDIuOCAyLjggMS41NDQgMCAyLjgtMS4yNTYgMi44LTIuOCAwLTEuNTQ0LTEuMjU2LTIuOC0yLjgtMi44eiIvPjwvZz48L3N2Zz4=');
  background-repeat: no-repeat;
  // background-position: top 0 left;
  // padding-left: $location-pin-size;
  // background-size: auto $location-pin-size;

  // @include breakpoint($tablet) {
    background-position: top 0.25*$vertical-baseline left;
    padding-left: $location-pin-size-tablet + 0.25*$vertical-baseline;
    background-size: auto $location-pin-size-tablet;
    min-height: 2*$vertical-baseline;
  // }
}

.agenda-event__details-container {
  overflow: hidden;
  height: 0;
  will-change: height;
  border-top: 1px solid transparent;
  transition: border 350ms ease-in-out;
  .agenda-event--expanded & {
    border-top: $border-style;
    // height: auto;

  }
}

.agenda-event__details {
  display: flex;
  flex-direction: column;
  @include breakpoint($tablet) {
    flex-direction: row;
  }
  > * {
    flex: 1 0;
  }
  transition: visibility 0ms linear;
  transition-delay: 350ms;
  visibility: hidden;
  .agenda-event--expanded & {
    transition-delay: 0ms;
    visibility: visible;
  }
}

.agenda-event__description {
  padding: $vertical-baseline 0;
}


.agenda-event__map {
  position: relative;
  background-color: rgb(229, 227, 223);
  // get rid of the container padding
  margin: 0 #{-$agenda-event-right-padding} 0 #{-$agenda-event-left-padding};
  @include breakpoint($tablet) {
    margin-left: 0;
  }
  // width: calc(100% + #{$agenda-event-right-padding});

  height: $map-height;
}

.agenda-event__venue-show-map-link {
  color: $color-primary;
}

.agenda-event__expand-details {
  z-index: 0;

  display: flex;
  justify-content: center;
  // height: 2*$vertical-baseline;
  // centered
  // position: absolute;
  // top: 0;
  // left: 0;
  // bottom: 0;
  // right: 0;
  font-weight: 400;
  color: $color-primary;
  padding: 0 $agenda-event-right-padding $vertical-baseline $agenda-event-left-padding;
  text-decoration: none !important;
  .agenda-event__expand-text {
    display: inline-block;
    @include sgl-heading(-1);
    margin: 0 0 0 4px;
    .less {
      display: none;
    }
  }
  // margin-top: -$vertical-baseline;


}

.agenda-event__expand-chevron {
  display: block;
  height: $vertical-baseline;

  width: $vertical-baseline;
  background-image: url("/static/images/chevron-down.svg");
  background-size: auto 0.8rem;
  background-repeat: no-repeat;
  background-position: left center;
  transition: transform $height-transition-duration*2/3 ease-in-out;
  .agenda-event--expanded & {
    transform: rotate(-180deg);
  }
  
}